<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>След от мыши (Чистый JS)</title>
    <script type="module" src="./mainscript.js" defer></script>
    <style>
        /* CSS стили для всей страницы */

        html, body {
            height: 100%; /* Заставляем html и body занять всю высоту экрана */
            margin: 0;    /* Убираем стандартные отступы */
            padding: 0;   /* Убираем стандартные внутренние отступы */
            box-sizing: border-box; /* Для удобства расчета размеров*/
            scroll-behavior: smooth;
        }

        body {
            /* background-color: rgb(221, 212, 225);  */
         }

        /* CSS стили для элементов следа */
        .mouse-trail-element {
            position: absolute; /* Важно для позиционирования по координатам мыши */
            width: 3px;
            height: 2px;
            background-color: rgb(120, 93, 99);
             /* Белый полупрозрачный цвет */
            border-radius: 50%; 
            pointer-events: none; /* Очень важно: элементы не будут блокировать клики по другим элементам */
            z-index: 9999; /* Чтобы след был поверх всего */
            animation: fadeAndShrink 3s forwards; /* Анимация длительностью 10 секунд */
        }

        /* Описание анимации */
        @keyframes fadeAndShrink {
            0% {
                opacity: 1;     /* Начинаем полностью невидимым */
                transform: scale(0); /* Начинаем нулевого размера */
            }
            20% { /* Фаза быстрого появления */
                opacity: 0.9;   /* Достигаем заданной прозрачности */
                transform: scale(1); /* Достигаем полного размера */
            }
            100% {
                opacity: 0.2;     /* Полностью исчезаем */
                transform: scale(0.5); /* Немного уменьшаемся к концу */
            }
        }

        @keyframes blurCont {
            from {
                filter: blur(2px);
            }
            to {
                filter: blur(none);
            }
        }

        .cont{
             height: 100vh;
            width: 100%;
            background-image: url('./src/images/flowerbg.png');
            background-color: rgb(221, 212, 225); 
            background-repeat: no-repeat;
            background-position: center;
            background-size: auto 100%;
            background-attachment: fixed;
            position: relative;
            animation: blurCont 1.5s ease-out;
        }

      
        @font-face {
    font-family: 'montserat';
    font-style: normal;
    font-weight: normal;
    src: url('./montserrat/Montserrat-Light.otf');
    }

        header {
            height: 10%;
            width: 100%;
            position: fixed;
            z-index: 1;
            /* font-family: futura light; */
            /* padding-bottom: 2vh; */
            /* box-shadow: 0 -1px  #e7e7e7 inset; */
            }
            /* header::after {
                content: '';
                position: absolute;
                background: rgba(255, 255, 255, 0.5);
                height: .5px;
                margin-top: 3vh;
                width: 100%;
            } */


        .header {
            display: flex;
height: 100%;
    
           }

           .leftlist {
            backdrop-filter: blur(5px);
            border-radius: 10px;
            padding: 0;
            /* margin: 0; */
            /* border: solid red 1px ; */
            height: 100%;
            width: 25%;
            display: flex;
            justify-content: space-evenly;
            align-items: center;
            margin-right: auto
           }

            .rightlist {
            backdrop-filter: blur(5px);
            border-radius: 10px;
            /* padding: 0; */
            /* margin: 0; */
            /* border: solid red 1px ; */
            height: 100%;
            width: 25%;
            display: flex;
            justify-content: space-evenly;
            align-items: center;
            margin-left: auto
           }

        main {
            top: 0;
            z-index: -1;
            width: 100%;
            perspective: 500px; 
             overflow-x: hidden;
        }

        .logoCont{
            position: relative;
         /* width: 15%; */
         height: 120%;   
         /* border: solid yellow 1px; */
         text-align: center;
         display: flex;
         align-items: center;
         justify-content: center ;
         padding-top: 1vh;
         /* margin-left: auto; */
         animation: takingPlace 1.5s ease-out forwards;;
        }

        @keyframes takingPlace {
            from {
                filter: blur(2px);

                opacity: .1;
                text-shadow: 10px 0 10px rgba(120, 93, 99, 0.6);

            }
            50% {
                filter: blur(1px);
                opacity: .7;
                text-shadow: 10px 0 10px rgba(120, 93, 99, 0.667);
            }
            to {
                /* transform: none; */
                filter: none;
                text-shadow: none;
                opacity: 1;
            }
             
        }

        @keyframes animateImg {
            from {

                filter: drop-shadow( 10px 0 10px rgba(0, 0, 8, 0.776)) blur(2px);
            }
            50% {
                filter: drop-shadow( 5px 0 10px rgba(0, 0, 34, 0.716)) blur(1px);
            }
            to {
                filter: none;

            }
        }

        .img {
                     animation: animateImg 1s  forwards;
        }
        .logo {
            font-family: none;
            font-size: 2.5em;
            color: rgb(120, 93, 99);
            letter-spacing: 1px;
            text-rendering: optimizeSpeed;
            width: 100%;
        }

        /* .logoImg:hover{
            transform: scale(1.2);
        } */

        .logoImg{
            height: 9em;
            transition: transform .5s;
        }

        span,li {
            font-family: Dosis;
            font-size: 1.2rem;
            font-weight: 100;
            color: rgb(120, 93, 99);
            transition: transform .3s;  
        }


        span:hover{
            transform: scale( 1.1)
            ;
        }

        li:hover{
            transform: scale( 1.1)
            ;
        }



        footer {
            text-align: center;
            width: 100vw;
            /* position: absolute; */
            background: black;
            color: #ddd;
            font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
            font-size: 14px;
            height: 20vh;
            padding: 40px 0 40px;
            display: flex;
            justify-content: center;
            align-items: center ;
        }

        a {
            color : rgb(120, 93, 99); 
            text-decoration: none;
            font-family: dosis  ;
            font-size: 1.2rem;
            transition: transform .3s;  
        }

        a:hover{
            transform: scale( 1.1);
        }
        
        .layer {
            height: 70vh;
            overflow: hidden;
            transition: transform .5s, background-size .6s;
           margin: 0;
        }

        .layer1 {
            background-image: url('./layer2.jpg')  ;
            background-repeat: no-repeat;
            background-position: center var(--bg_position);
            background-size: 100%;
            background-attachment: fixed;
            animation: changeLayer1 10s ease-in-out infinite;
            -moz-animation: changeLayer1 10s ease-in-out infinite;

        }

        @keyframes changeLayer1 {
            from {   
                 background-image: url('./layer2.jpg')  ;
}


            50% {
                background-image: url('./layer33(1).jpg')  ;

            }
            to {          
                 background-image: url('./layer2.jpg')  ;
            }
            
        }
/* 
        .layer2 {
            background: url('./layer2.jpg') center  ;
            background-size: 100%;
        }   */

        .layer3 {
            background: url('./layer33(1).jpg')  no-repeat  ;
            background-size: 100%;  
            background-position: center var(--bg_position2);
            background-attachment: fixed;

        }
        .intro {
            /* height: 280vh; */
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            /* background: url(2147721577.jpg) ; */
        }

        /* .layer:hover {
            background-size: 103%;
        } */

        .portfolio_text {
            font-family: dosis;
            /* font-size: 3rem; */
            color: #ddd;
            /* color: rgb(32, 0, 0); */
            border: dotted 1px rgb(32, 0, 0); 
            width: fit-content; 
            padding-top: 10vh;   
padding-bottom: 10vh;
padding-inline: 5vw;
margin: 0;
letter-spacing: 1px;
text-rendering: optimizeSpeed;
        }

        .about {
            border:  dotted green 1px;
        }

        .contactsSection {
            height: 100vh;
            position: relative;
             background: greenyellow;
             background: url('./67dbb666b3ce8ebf5ffd59eb_flower-scroll.webp') center 20% / 80% no-repeat;
             background-attachment: fixed;
        }

        .contactsCont {
            text-align: center;
            width: fit-content;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%,-50%);
            display: flex;
            justify-content: center;
            align-items: center;
            border: 1px dotted #ddd;
            color: #333;
            font-size: 1.7rem;
            backdrop-filter: blur(10px);
            /* border-radius: 30px 40px 30px 40px ; */
background-color: #ffffff4d;
padding-inline: 2vw;
perspective: 500px;
transform-style: preserve-3d;
        }

        .email { 
            width: fit-content;
            margin: 0;
            padding-inline: 0;
            border: none;
            padding-top: 7vh;
            padding-bottom: 7vh;
            color: inherit;
            
        }
        .svg {
            width: 50px;
            height: 50px;
            color: rgb(120, 93, 99);
            padding-inline: 2vw;
        }

        .special {
            /* width: 14vh; */
            margin: 0;
            padding: 3px;
            /* padding-inline: 10px; */
            margin-left: 5vw;
            position: absolute;
            margin-top: 5vh ;
            font-size: .7rem;
            text-align: center;
            color: inherit;
            border: dotted 1px rgb(32, 0, 0); 

        }

        @keyframes clickEmail {
            from {transform: scale(1) translate(-50%,-50%)}
            50% {transform: scale(.9) translate(-55%,-55%);}
            to {transform: scale(1) translate(-50%,-50%);}
        }

        .clickEmailClass {
            animation: clickEmail 0.3s ease-in-out;
        }

        @keyframes hideHeader {
            to {
                transform: translateY(-110%)           
             }
        }

        .headerOff {
            animation: hideHeader .3s ease-in forwards;
        }

        @keyframes showHeader {
            from {                transform: translateY(-110%)           
}
            to {
                transform: translateY(0%)           
             }
        }

        .headerOn {
            animation: showHeader 0.3s ease-out forwards;
        }

        .p1Text{
            font-size: 2.3em;
            font-family: Arial;
            color: rgb(49, 61, 38);
            /* text-transform: uppercase; */
            letter-spacing: 2px;
            text-rendering: optimizeSpeed;
            padding: 0;
            margin: 0;
            /* filter: blur(4px); */
        }

        .firstpTextCont {
            width: fit-content;
            position: absolute;
            bottom: 10vh;
            left: 7vh; 
    
            
        }

        .introTitleCont {
            text-align: center;
            display: flex;
            width: 100%;
            /* border: solid 1px red; */
         justify-content: center;
            background-image: url('./35320327_hmn13.svg');
            background-position: center;
            background-size: 100%;
        }

        .introTitle {
            text-transform: uppercase;
            font-size: 6vw;
            font-family:  montserat;
            font-weight: bold;
            letter-spacing: 1px;   
            padding-top: 2.3em;
            padding-bottom: 2.3em;
            margin: 0; 
            /* border-bottom: 1px black inset; */
        }

        /* .introEvent {
            -webkit-text-stroke: 1px black;
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            font-family:  Arial, Helvetica, sans-serif;
        } */

     
        .introImg {
            width: var(--introImg_width);
            transform: translateY(var(--introImg_translateY));
        }

        .introTextCont {
            width: 100%;
            /* margin-left: auto; */
            /* padding: 5%; */
            font-family: dosis;
            font-size: 2vw;
            box-sizing: border-box;
        }

.events {
    display: inline;
}

.introTextCont h2:nth-child(1) {
    font-size: 7vw;
    text-indent: 50vw;
    padding-top: 1.5em;
}



.introTextCont h2:nth-child(2) {
    font-size: 7vw;
    text-indent: 26vw;
    margin-bottom: 0.4em;
}

.introTextCont p:nth-child(3) {
font-size: 0.7em;
padding-inline: 15vw;
border-bottom: inset 1px rgba(0, 0, 0, 0.56);
padding-bottom: 2em;

}

.aboutUsText {
    font-family: montserat;
    margin: 0;
}

.introPicCont {
            /* padding-top: 20vh; */
            /* padding-bottom: 20vh; */
             display: flex;
justify-content: center; 
width: 100%;
height: 100vh;
/* position: sticky; */
top: 3em;
left: 7em;
line-height: 0;
/* z-index: -1; */
        }


.introBg {
    background-image: url(2150871941.jpg);
    background-size: 100%;
    background-position: center;
    clip-path: inset(var(--introClipPath));
    width: 100%;
}

.introTextBg {
background: url('./35320284_yyg15.svg');
position: absolute;
width: 100%;
 background-size: 100%;
/* background-position: center 80% ;  */
z-index: -1;
filter: blur(0.4px);
/* perspective: 500px;
transform-style: preserve-3d; */
/* border: solid ; */
transform: rotate(90deg);
left: -32%;
filter: drop-shadow( black -10px 4px 6px);
}


.introTitleCases {
    font-family: montserat;
    position: absolute;
    right: 10em;
    bottom: 3em;
    font-size: 2em;
}

@media (max-width: 999.98px) {
    .p1Text {
        font-size: 1.8em;

    }
}

.runningLine {
position: absolute;
display: flex;
top: 0;
width: 200vw;
height: 100px
}

.runningItem {
background-image: url('./95490.jpg');
background-size: cover;
margin: 10px;
width: 100px;
height: inherit;

}

    </style>
</head>
<body>

<header>

    <nav class="header">

        <div class="leftlist">
            <a href="#events" class="portfolio">Events</a>
            <a class="optional">Optional</a>
        </div>

        <div class="logoCont">
            <!-- <span class="logo">Your Brand</span> -->
            <img class="logoImg" src="./trtyakov(1).png" alt="логотип агентства">
        </div>
        <!-- </div> -->

        <div class="rightlist">
            <a  href="#aboutus">About us</a>
            <a href="#contact">Contacts</a>
        </div>

    </nav>

</header>

<main>

    <section class="cont">

        <div class="firstpTextCont">
            <h1 class="p1Text line1">Your Events.</h1>
            <h2 class="p1Text line2">Great Moments.</h2>
            <!-- <p class="p1Text line3">We Handle It.</p> -->
        </div>

    </section>

    <section class="intro">
<div class="introTextBg"> 
    <!-- <div class="transformBg"></div> -->
</div> 

        <div id="aboutus" class="introTextCont">
            <h2 class="aboutUsText">МЫ</h2>
            <h2 class="aboutUsText"> опытная команда</h2>
            <p class="aboutUsText"> создающая мероприятия разных форматов и любых масштабов 
                От вдумчивой лекции камерного спикера  до общегородской ярмарки. 
                От имиджевой бизнес-выставки до муниципальной церемонии награждения
            </p>
            <!-- <div class="runningLine">
                <div class="runningItem"></div>
                <div class="runningItem"></div>
                <div class="runningItem"></div>
                <div class="runningItem"></div>
                <div class="runningItem"></div>
                <div class="runningItem"></div>
                
            </div> -->
        </div>

        <div class="introPicCont">
            <div class="introBg"></div>
        </div>


        <div class="introTitleCont">
            <h2 class="introTitle">tretyakov&nbsp&nbspevent&nbsp&nbspgroup</h2>
            <h2 class="introTitleCases">cases</h2>
        </div>

    </section>

    <div class="layer layer1"
    id="events">
        <h1 class="portfolio_text">Title</h1>
        <p class="portfolio_text">description lorem ipsum</p>
    </div>

    <!-- <div class="layer layer2"></div> -->

    <div class="layer layer3"></div>

    <section class="contactsSection" id="contact">
        <aside>
            <p class="special ">LET'S&nbsp&nbsp&nbsp&nbspΜΑΚΕ<br> SOMETHING<br> SPECIAL...</p>
        </aside> 

        <div class="contactsCont">
            <svg class="svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M0.208313 0.3125H5.20831V28.875L35.1311 28.875L24.6072 18.3511L28.1427 14.8156L44.7022 31.375L28.1427 47.9344L24.6072 44.3989L35.1311 33.875H0.208313V0.3125Z"
                    fill="currentColor"></path>
            </svg>
            <p class="email portfolio_text">&nbsp youremail@gmail.com</p>
        </div>

    </section>

</main>

<footer>

    <div class="container">
        Parallax.js © 2017 <a href="http://pixelcog.com/">PixelCog Inc.</a>
        released under
        <a href="https://github.com/pixelcog/parallax.js/blob/master/LICENSE">MIT license</a><br>
        All images taken from NASA are
        <a href="http://www.nasa.gov/audience/formedia/features/MP_Photo_Guidelines.html#.U454_JRdXls">public
            domain</a>.<br><br>

    </div>

</footer>

    <script type="module">


// let runningLine = document.querySelector('.runningLine')
// const originalContent = runningLine.innerHTML;
// runningLine.innerHTML = originalContent + originalContent;
// let position = 0;
// const trackWidth = runningLine.scrollWidth;
// function running() {
//     position -= 3
//     if (position <= -trackWidth / 2) { // Если прокрутили ширину одного набора элементов
//         position = 0; // Сбрасываем позицию
//     }
//     runningLine.style.transform = `translateX(${position}px)`;

// requestAnimationFrame(running);
// }
// running()

// setInterval(()=>running(),100 )
document.addEventListener('DOMContentLoaded',() =>{



let aboutus = document.querySelector('.introTextCont')



let aboutUsText = document.querySelector('.aboutUsText')
let s = document.querySelectorAll('.p1Text')



function setHeight(){

    let aboutusStyles = getComputedStyle(aboutus)
    let introTextBg = document.querySelector('.introTextBg')
    introTextBg.style.height = aboutusStyles.height
}

setHeight()


window.addEventListener('resize', () => {
    setHeight()
})




// прописать логику ресайза 
        let introBg = document.querySelector('.introBg')
        let minValue = 20
        document.documentElement.style.setProperty('--introClipPath', `${minValue}%`)

        console.log(introBg)
        let windowHeight = window.innerHeight
        const introBgAbsoluteTop = introBg.getBoundingClientRect().top + window.scrollY 
        const startPoint = 200
        const scrolldistanceTointroBg = introBgAbsoluteTop - windowHeight + startPoint
        let scrolled = 0
        let scaleDistance = 100 - minValue
        let scrollWay = introBg.clientHeight*2
        let step = scrollWay / scaleDistance
        console.log(step)


        function explodingImg() {
            scrolled = window.scrollY
            if (scrolled > scrolldistanceTointroBg 
            && scrolled < scrolldistanceTointroBg + scrollWay ){
                
                let value =  minValue - (scrolled - scrolldistanceTointroBg)/step + "%"
                document.documentElement.style.setProperty('--introClipPath', value)
                // расчет при уменьшении
                // при увеличинии let value =  (scrolled - scrolldistanceTointroImg)/step + minValue + "%"
            } 
            if (scrolled < scrolldistanceTointroBg) {
                document.documentElement.style.setProperty('--introClipPath', minValue+'%')

            }

        }

        window.addEventListener('scroll',explodingImg)

        


        let contactsCont = document.querySelector(".contactsCont")
        contactsCont.addEventListener('click', contactClick)

        function contactClick() {

                contactsCont.classList.remove('clickEmailClass');

                // Маленький хак для принудительного рефлоу, 
                // чтобы анимация перезапускалась
                void contactsCont.offsetWidth;

                contactsCont.classList.add('clickEmailClass')
            }
        
        })
       
</script>

</body>
</html>